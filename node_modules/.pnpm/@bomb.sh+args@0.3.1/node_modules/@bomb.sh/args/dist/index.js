var p=/^(true|false)$/,h=/^('|").*\1$/,u=(e,n,t,d)=>{if(n.includes(".")){let i=n.split(".");for(let l=0;l<i.length-1;l++){let s=i[l],o={};u(e,s,o),e=o}n=i[i.length-1]}d==="array"&&e[n]!==void 0?Array.isArray(e[n])?e[n].push(t):e[n]=[e[n],t]:e[n]=d==="array"?[t]:t},T=(e,n)=>{if(n.array&&n.array.length>0&&n.array.includes(e))return"array";if(n.string&&n.string.length>0&&n.string.includes(e))return"string";if(n.boolean&&n.boolean.length>0&&n.boolean.includes(e))return"boolean"},y=e=>e==="string"?"":e==="array"?[]:!0,A=(e,n)=>n==="string"?e:n==="boolean"?e===void 0?!0:e==="true":e&&(e.length>3&&p.test(e)?e==="true":e.length>2&&h.test(e)?e.slice(1,-1):e[0]==="."&&/\d/.test(e[1])||/\d/.test(e[0])?Number(e):e);function b(e,{default:n,alias:t,...d}={}){let i={...n,_:[]};if(e.length===0)return i;for(let l=0;l<e.length;l++){let s=e[l],o=e[l+1],a,r="",f;if(s.length>1&&s[0]==="-"){if(s[1]!=="-"&&s.length>2&&!s.includes("="))if(s.includes("."))r=s.slice(1,2),f=s.slice(2);else{let g=s.slice(1,-1);for(let c of g)t&&t[c]!==void 0&&(c=t[c]),u(i,c,y(a),a);r=s.slice(-1),o&&o[0]!=="-"&&(f=o,l++)}else if(!s.includes("=")&&o&&o[0]!=="-")r=s.replace(/^-{1,2}/,""),a=T(r,d),a==="boolean"?f="true":(f=o,l++);else{let g=s.indexOf("=");g===-1?r=s.replace(/^-{1,2}/,""):(r=s.slice(0,g).replace(/^-{1,2}/,""),f=s.slice(g+1)),a=T(r,d)}(!a||a==="boolean")&&r.length>3&&r.startsWith("no-")?u(i,r.slice(3),!1):(t&&t[r]!==void 0&&(r=t[r]),u(i,r,A(f,a)??y(a),a))}else if(s){i._.push(A(s));continue}}return i}export{b as parse};
